// ArkUIåŠ¨ç”»å’Œè½¬åœºæ•ˆæžœæµ‹è¯•ç”¨ä¾‹
// æµ‹è¯•å„ç§åŠ¨ç”»APIå’Œè½¬åœºç‰¹æ•ˆ

@Component
struct AnimationTest {
  @State rotateAngle: number = 0;
  @State scaleValue: number = 1;
  @State translateX: number = 0;
  @State translateY: number = 0;
  @State opacity: number = 1;
  @State isVisible: boolean = true;
  @State backgroundColor: Color = Color.Blue;

  build() {
    Column({ space: 20 }) {
      Text('ArkUIåŠ¨ç”»æµ‹è¯•')
        .fontSize(24)
        .fontWeight(FontWeight.Bold)
        .textAlign(TextAlign.Center)
        .width('100%')

      // åŸºç¡€åŠ¨ç”»æµ‹è¯•
      Text('åŸºç¡€åŠ¨ç”»')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)

      // æ—‹è½¬åŠ¨ç”»
      Button('æ—‹è½¬åŠ¨ç”»')
        .width(120)
        .height(40)
        .backgroundColor(Color.Red)
        .rotate({ x: 0, y: 0, z: 1, angle: this.rotateAngle })
        .animation({
          duration: 1000,
          curve: Curve.EaseInOut,
          iterations: 1,
          playMode: PlayMode.Normal
        })
        .onClick(() => {
          this.rotateAngle += 360
        })

      // ç¼©æ”¾åŠ¨ç”»
      Button('ç¼©æ”¾åŠ¨ç”»')
        .width(120)
        .height(40)
        .backgroundColor(Color.Green)
        .scale({ x: this.scaleValue, y: this.scaleValue })
        .animation({
          duration: 800,
          curve: Curve.Elastic,
          iterations: 1,
          playMode: PlayMode.Alternate
        })
        .onClick(() => {
          this.scaleValue = this.scaleValue === 1 ? 1.5 : 1
        })

      // ä½ç§»åŠ¨ç”»
      Button('ä½ç§»åŠ¨ç”»')
        .width(120)
        .height(40)
        .backgroundColor(Color.Orange)
        .translate({ x: this.translateX, y: this.translateY })
        .animation({
          duration: 600,
          curve: Curve.Linear,
          iterations: 1,
          playMode: PlayMode.Normal
        })
        .onClick(() => {
          this.translateX = this.translateX === 0 ? 100 : 0
          this.translateY = this.translateY === 0 ? 50 : 0
        })

      // é€æ˜Žåº¦åŠ¨ç”»
      Button('é€æ˜Žåº¦åŠ¨ç”»')
        .width(120)
        .height(40) 
        .backgroundColor(Color.Purple)
        .opacity(this.opacity)
        .animation({
          duration: 1000,
          curve: Curve.EaseOut,
          iterations: 1,
          playMode: PlayMode.Normal
        })
        .onClick(() => {
          this.opacity = this.opacity === 1 ? 0.3 : 1
        })

      // æ˜¾ç¤ºéšè—åŠ¨ç”»
      Column() {
        if (this.isVisible) {
          Text('å¯è§æ€§åˆ‡æ¢')
            .fontSize(16)
            .fontColor(Color.White)
            .backgroundColor(Color.Pink)
            .padding(10)
            .borderRadius(8)
            .transition({
              type: TransitionType.Insert,
              opacity: 0,
              translate: { x: 0, y: -50 }
            })
            .transition({
              type: TransitionType.Delete,
              opacity: 0,
              translate: { x: 0, y: 50 }
            })
        }
        
        Button('åˆ‡æ¢æ˜¾ç¤º')
          .width(120)
          .height(40)
          .backgroundColor(Color.Gray)
          .margin({ top: 10 })
          .onClick(() => {
            animateTo({
              duration: 500,
              curve: Curve.EaseInOut
            }, () => {
              this.isVisible = !this.isVisible
            })
          })
      }

      // ç»„åˆåŠ¨ç”»æµ‹è¯•
      Text('ç»„åˆåŠ¨ç”»')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .margin({ top: 20 })

      Button('ç»„åˆåŠ¨ç”»')
        .width(150)
        .height(50)
        .backgroundColor(this.backgroundColor)
        .fontColor(Color.White)
        .borderRadius(25)
        .scale({ x: this.scaleValue, y: this.scaleValue })
        .rotate({ x: 0, y: 0, z: 1, angle: this.rotateAngle })
        .opacity(this.opacity)
        .animation({
          duration: 1200,
          curve: Curve.Friction,
          iterations: 1,
          playMode: PlayMode.Normal,
          delay: 100
        })
        .onClick(() => {
          // ä½¿ç”¨animateToå®žçŽ°å¤æ‚åŠ¨ç”»
          animateTo({
            duration: 1000,
            curve: Curve.EaseInOut,
            iterations: 1,
            playMode: PlayMode.Normal,
            onFinish: () => {
              console.log('åŠ¨ç”»å®Œæˆ')
            }
          }, () => {
            this.rotateAngle += 180
            this.scaleValue = this.scaleValue === 1 ? 1.2 : 1
            this.backgroundColor = this.backgroundColor === Color.Blue ? Color.Red : Color.Blue
          })
        })

      // å…³é”®å¸§åŠ¨ç”»æµ‹è¯•
      Text('å…³é”®å¸§åŠ¨ç”»')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .margin({ top: 20 })

      Row() {
        Text('ðŸš€')
          .fontSize(30)
          .translate({ x: this.translateX * 2, y: 0 })
          .animation({
            duration: 2000,
            curve: Curve.FastOutSlowIn,
            iterations: -1, // æ— é™å¾ªçŽ¯
            playMode: PlayMode.Alternate
          })
      }
      .width('100%')
      .height(50)
      .justifyContent(FlexAlign.Start)
      .alignItems(VerticalAlign.Center)
      .onAppear(() => {
        // è‡ªåŠ¨å¯åŠ¨åŠ¨ç”»
        this.translateX = 200
      })

      // å¼¹ç°§åŠ¨ç”»æµ‹è¯•
      Button('å¼¹ç°§åŠ¨ç”»')
        .width(140)
        .height(45)
        .backgroundColor(Color.Cyan)
        .scale({ x: this.scaleValue, y: this.scaleValue })
        .animation({
          duration: 800,
          curve: Curve.Spring,
          iterations: 1,
          playMode: PlayMode.Normal
        })
        .onClick(() => {
          this.scaleValue = this.scaleValue === 1 ? 0.8 : 1
        })

      // è·¯å¾„åŠ¨ç”»æµ‹è¯•ï¼ˆæ¨¡æ‹Ÿï¼‰
      Text('è·¯å¾„åŠ¨ç”»')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .margin({ top: 20 })

      Stack() {
        Text('â­')
          .fontSize(20)
          .translate({ 
            x: Math.cos(this.rotateAngle * Math.PI / 180) * 50,
            y: Math.sin(this.rotateAngle * Math.PI / 180) * 50
          })
          .animation({
            duration: 3000,
            curve: Curve.Linear,
            iterations: -1,
            playMode: PlayMode.Normal
          })
      }
      .width(120)
      .height(120)
      .backgroundColor(Color.Yellow)
      .borderRadius(60)
      .onAppear(() => {
        // åœ†å½¢è·¯å¾„åŠ¨ç”»
        setInterval(() => {
          this.rotateAngle += 1
        }, 50)
      })
    }
    .width('100%')
    .height('100%')
    .padding(20)
    .backgroundColor('#F8F8F8')
  }
}